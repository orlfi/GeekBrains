(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[96],{96087:function(O,y,r){"use strict";r.r(y),r.d(y,{default:function(){return D}});var W=r(57663),I=r(71577),T=r(2824),c=r(8870),Y=r(34792),g=r(48086),o=r(3182),C=r(94043),t=r.n(C),E=r(70844),S=r(49101),v=r(67294),L=r(38501),A=r(32478);function P(){return h.apply(this,arguments)}function h(){return h=(0,o.Z)(t().mark(function l(){var n;return t().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,A.WY)("/api/agents");case 2:return n=a.sent,a.abrupt("return",{data:n.Agents});case 4:case"end":return a.stop()}},l)})),h.apply(this,arguments)}function U(l,n){return p.apply(this,arguments)}function p(){return p=(0,o.Z)(t().mark(function l(n,s){var a;return t().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.WY)("/api/agents/register",(0,c.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:n},s||{}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},l)})),p.apply(this,arguments)}var $=r(83886),F=r(5966),u=r(85893),x={false:{text:"Disabled",status:"Error"},true:{text:"Enabled",status:"Success"}},M=[{title:"ID",width:80,dataIndex:"AgentId"},{title:"URL",dataIndex:"AgentUrl",align:"left"},{title:"Status",dataIndex:"IsEnabled",align:"center",valueEnum:x}],V=function(){var l=(0,o.Z)(t().mark(function n(s){var a;return t().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.default.loading("Add"),e.prev=1,e.next=4,U((0,c.Z)((0,c.Z)({},s),{},{IsEnabled:!0}));case 4:return a(),g.default.success("Added successfully"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),a(),g.default.error("Adding failed, please try again\uFF01"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},n,null,[[1,9]])}));return function(s){return l.apply(this,arguments)}}(),B=function(){var n=(0,v.useState)(!1),s=(0,T.Z)(n,2),a=s[0],i=s[1],e=(0,v.useRef)(),R=(0,v.useRef)();return(0,u.jsxs)(E.ZP,{children:[(0,u.jsx)(L.ZP,{actionRef:e,columns:M,request:P,rowKey:"AgentId",pagination:{},search:!1,dateFormatter:"string",headerTitle:!1,toolBarRender:function(){return[(0,u.jsxs)(I.Z,{type:"primary",onClick:function(){var d;(d=R.current)===null||d===void 0||d.resetFields(),i(!0)},children:[(0,u.jsx)(S.Z,{})," Add agent"]},"primary")]}}),(0,u.jsx)($.Z,{title:"New agent",width:"400px",formRef:R,visible:a,onVisibleChange:i,onFinish:function(){var Z=(0,o.Z)(t().mark(function m(d){var j;return t().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,V(d);case 2:j=f.sent,j&&(i(!1),e.current&&e.current.reload());case 4:case"end":return f.stop()}},m)}));return function(m){return Z.apply(this,arguments)}}(),children:(0,u.jsx)(F.Z,{rules:[{required:!0,message:"Agent URL is required"}],width:"md",name:"AgentUrl",label:"URL",placeholder:"Please enter agent's URL"})})]})},D=B}}]);
