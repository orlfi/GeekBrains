(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[465],{54570:function(S){S.exports={agentInfo:"agentInfo___1zGVU",agentInfoTitle:"agentInfoTitle___bDkOD"}},55645:function(S){S.exports={iconGroup:"iconGroup___3k4wY",anticon:"anticon___3Dohd",rankingList:"rankingList___2m9pc",rankingItemNumber:"rankingItemNumber___3GU97",active:"active___yfv9P",rankingItemTitle:"rankingItemTitle___2wCNR",salesExtra:"salesExtra___5tHcw",currentDate:"currentDate___LmAi0",salesCard:"salesCard___3TK5r",salesBar:"salesBar___2Hf-J",salesRank:"salesRank___1Tiwd",salesCardExtra:"salesCardExtra___29f06",salesTypeRadio:"salesTypeRadio___3BEdY",offlineCard:"offlineCard___14xs1",trendText:"trendText___38GaI",rankingTitle:"rankingTitle___VcfLT",salesExtraWrap:"salesExtraWrap___3gu8i"}},6256:function(S,X,i){"use strict";i.r(X),i.d(X,{default:function(){return Jt}});var aa=i(53400),et=i(94168),ea=i(34792),j=i(48086),L=i(2824),E=i(67294),nt=i(21349),rt=i(70844),g=i(8870),na=i(58024),R=i(39144),ra=i(18106),q=i(45934),ia=i(13062),_=i(71230),oa=i(77576),it=i(12028),ua=i(89032),x=i(15746),N=i(26766),n=i(85893),ot=function(t){var e=t.timeRange,s=t.data,a=t.loading,A={areaStyle:{fillOpacity:.7},appendPadding:10,isPercent:!0};return(0,n.jsx)(N.uN,(0,g.Z)((0,g.Z)({},A),{},{forceFit:!0,height:400,data:s,xField:"Time",yField:"Value",yAxis:{max:100,label:{formatter:function(u){return u+"%"}}},xAxis:{mask:"DD.MM HH:mm:ss",type:"time",label:{}}}))},ut=ot,st=function(t){var e=t.data;return(0,n.jsx)(N.uN,{forceFit:!0,height:400,data:e,xField:"Time",yField:"Value",yAxis:{label:{formatter:function(a){return a}}},xAxis:{mask:"DD.MM HH:mm:ss",type:"time"}})},dt=st,lt=function(t){var e=t.data;return(0,n.jsx)(N.uN,{forceFit:!0,height:400,data:e,xField:"Time",yField:"Value",yAxis:{max:100,label:{formatter:function(a){return a}}},xAxis:{mask:"DD.MM HH:mm:ss",type:"time"}})},ct=lt,gt=function(t){var e=t.data;return(0,n.jsx)(N.uN,{forceFit:!0,height:400,data:e,xField:"Time",yField:"Value",yAxis:{label:{formatter:function(a){return a}}},xAxis:{mask:"DD.MM HH:mm:ss",type:"time"}})},mt=gt,ht=function(t){var e=t.data;return(0,n.jsx)(N.uN,{forceFit:!0,height:400,data:e,xField:"Time",yField:"Value",yAxis:{max:100,label:{formatter:function(a){return a}}},xAxis:{mask:"DD.MM HH:mm:ss",type:"time"}})},ft=ht,d=i(32478),vt=i(93224),pt=i(94184),Tt=i.n(pt),At=i(54570),H=i.n(At),yt=i(22164),xt=function(t){var e=t.title,s=t.isEnabled,a=(0,vt.Z)(t,["title","isEnabled"]);return(0,n.jsx)("div",(0,g.Z)((0,g.Z)({className:Tt()(H().agentInfo)},a),{},{children:e&&(0,n.jsxs)("span",{className:H().agentInfoTitle,title:typeof e=="string"?e:"",children:[(0,n.jsx)(yt.Z,{className:H().agentInfoIcon}),e]})}))},Dt=xt,Ct=i(55645),Rt=i.n(Ct),It=i(30381),w=i.n(It),T=i(3182),Zt=i(94043),l=i.n(Zt);function jt(){return P.apply(this,arguments)}function P(){return P=(0,T.Z)(l().mark(function o(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.WY)("/api/agents");case 2:return e.t0=e.sent,e.abrupt("return",{data:e.t0});case 4:case"end":return e.stop()}},o)})),P.apply(this,arguments)}function Nt(o){return B.apply(this,arguments)}function B(){return B=(0,T.Z)(l().mark(function o(t){var e;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e="api/metrics/cpu/agent/".concat(t.AgentId,"/from/").concat(t.FromTime.toJSON(),"/to/").concat(t.ToTime.toJSON()),a.abrupt("return",(0,d.WY)(e,{method:"GET"}));case 2:case"end":return a.stop()}},o)})),B.apply(this,arguments)}function Ft(o){return O.apply(this,arguments)}function O(){return O=(0,T.Z)(l().mark(function o(t){var e;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e="api/metrics/ram/agent/".concat(t.AgentId,"/available/from/").concat(t.FromTime.toJSON(),"/to/").concat(t.ToTime.toJSON()),a.abrupt("return",(0,d.WY)(e,{method:"GET"}));case 2:case"end":return a.stop()}},o)})),O.apply(this,arguments)}function bt(o){return Y.apply(this,arguments)}function Y(){return Y=(0,T.Z)(l().mark(function o(t){var e;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e="api/metrics/hdd/agent/".concat(t.AgentId,"/disk-time/from/").concat(t.FromTime.toJSON(),"/to/").concat(t.ToTime.toJSON()),a.abrupt("return",(0,d.WY)(e,{method:"GET"}));case 2:case"end":return a.stop()}},o)})),Y.apply(this,arguments)}function Mt(o){return k.apply(this,arguments)}function k(){return k=(0,T.Z)(l().mark(function o(t){var e;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e="api/metrics/network/agent/".concat(t.AgentId,"/from/").concat(t.FromTime.toJSON(),"/to/").concat(t.ToTime.toJSON()),a.abrupt("return",(0,d.WY)(e,{method:"GET"}));case 2:case"end":return a.stop()}},o)})),k.apply(this,arguments)}function St(o){return G.apply(this,arguments)}function G(){return G=(0,T.Z)(l().mark(function o(t){var e;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e="api/metrics/dotnet/agent/".concat(t.AgentId,"/heap-size/from/").concat(t.FromTime.toJSON(),"/to/").concat(t.ToTime.toJSON()),a.abrupt("return",(0,d.WY)(e,{method:"GET"}));case 2:case"end":return a.stop()}},o)})),G.apply(this,arguments)}function Et(o){return J.apply(this,arguments)}function J(){return J=(0,T.Z)(l().mark(function o(t){var e;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e="/api/agents/enable/".concat(t),a.abrupt("return",(0,d.WY)(e,{method:"PUT"}));case 2:case"end":return a.stop()}},o)})),J.apply(this,arguments)}function Lt(o){return K.apply(this,arguments)}function K(){return K=(0,T.Z)(l().mark(function o(t){var e;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e="/api/agents/disable/".concat(t),a.abrupt("return",(0,d.WY)(e,{method:"PUT"}));case 2:case"end":return a.stop()}},o)})),K.apply(this,arguments)}for(var Ht=[],W=0;W<100;W+=1){var wt=w()(new Date().getTime()+1e3*60*30*W).format("HH:mm");Ht.push({Time:wt,AgentId:1,Type:"CPU metrics",Value:Math.floor(Math.random()*100)+10})}var Pt=function(t){var e=t.data,s=t.currentTabKey,a=(0,E.useState)(e.IsEnabled),A=(0,L.Z)(a,2),y=A[0],u=A[1],I=(0,d.QT)(Et,{manual:!0,onSuccess:function(h,m){j.default.success('Agent  id="'.concat(m[0],'" is enabled!'))},onError:function(h,m){u(!1),j.default.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0438 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F \u0430\u0433\u0435\u043D\u0442\u0430 id="'.concat(m[0],'" \u043D\u0430  enabled!'))}}),D=I.loading,b=I.run,c=(0,d.QT)(Lt,{manual:!0,onSuccess:function(h,m){j.default.success('Agent  id="'.concat(m[0],'" is disabled!'))},onError:function(h,m){u(!0),j.default.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0438 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F \u0430\u0433\u0435\u043D\u0442\u0430 id="'.concat(m[0],'" \u043D\u0430  disabled!'))}}),C=c.loading,Z=c.run,M=function(h,m){u(h),h?b(e.AgentId):Z(e.AgentId),m.stopPropagation()};return(0,n.jsxs)(_.Z,{justify:"start",wrap:!1,align:"middle",gutter:8,style:{width:250,margin:"8px 0"},children:[(0,n.jsx)(x.Z,{flex:"auto",children:(0,n.jsx)(Dt,{title:e.AgentUrl})}),(0,n.jsx)(x.Z,{flex:"none",children:(0,n.jsx)(it.Z,{checked:y,defaultChecked:y,onChange:M,loading:D||C})})]})},Bt=q.Z.TabPane,F={xs:24,sm:12,md:12,lg:8,xl:8,style:{marginBottom:24}},Ot=function(t){var e=t.activeKey,s=t.loading,a=t.timeRange,A=t.agentsData,y=t.cpuData,u=t.cpuLoading,I=t.ramData,D=t.ramLoading,b=t.hddData,c=t.hddLoading,C=t.networkData,Z=t.networkLoading,M=t.dotNetData,v=t.dotNetLoading,h=t.handleTabChange,m=function(V){h(V)};return(0,n.jsx)(R.Z,{loading:s,className:Rt().offlineCard,bordered:!1,style:{marginTop:32},children:(0,n.jsx)(q.Z,{activeKey:e,onChange:m,tabPosition:"left",children:A.map(function(f){return(0,n.jsx)(Bt,{tab:(0,n.jsx)(Pt,{data:f,currentTabKey:e}),children:(0,n.jsx)("div",{style:{padding:"0 24px"},children:(0,n.jsxs)(_.Z,{gutter:24,children:[(0,n.jsx)(x.Z,(0,g.Z)((0,g.Z)({},F),{},{children:(0,n.jsx)(R.Z,{loading:u,title:"CPU usage, %",style:{marginBottom:24},bordered:!1,children:(0,n.jsx)(ut,{loading:u,data:y,agentId:f.AgentId,timeRange:a})})})),(0,n.jsx)(x.Z,(0,g.Z)((0,g.Z)({},F),{},{children:(0,n.jsx)(R.Z,{loading:D,title:"RAM available, Mb",style:{marginBottom:24},bordered:!1,children:(0,n.jsx)(dt,{loading:D,data:I,agentId:f.AgentId,timeRange:a})})})),(0,n.jsx)(x.Z,(0,g.Z)((0,g.Z)({},F),{},{children:(0,n.jsx)(R.Z,{loading:c,title:"HDD active time, %",style:{marginBottom:24},bordered:!1,children:(0,n.jsx)(ct,{loading:c,data:b,agentId:f.AgentId,timeRange:a})})})),(0,n.jsx)(x.Z,(0,g.Z)((0,g.Z)({},F),{},{children:(0,n.jsx)(R.Z,{loading:Z,title:"Network send speed, Mb/s",style:{marginBottom:24},bordered:!1,children:(0,n.jsx)(mt,{loading:Z,data:C,agentId:f.AgentId,timeRange:a})})})),(0,n.jsx)(x.Z,(0,g.Z)((0,g.Z)({},F),{},{children:(0,n.jsx)(R.Z,{loading:v,title:"CLR Memory gen 1 heap size, \u041C\u0431 ",style:{marginBottom:24},bordered:!1,children:(0,n.jsx)(ft,{loading:v,data:M,agentId:f.AgentId,timeRange:a})})}))]})})},f.AgentId)})})})},Yt=Ot,kt="DD.MM.YYYY HH:mm",Gt=function(){var t=(0,E.useState)(""),e=(0,L.Z)(t,2),s=e[0],a=e[1],A=(0,E.useState)([w()().startOf("day"),w()()]),y=(0,L.Z)(A,2),u=y[0],I=y[1],D=(0,d.QT)(jt,{onSuccess:function(r,at){r!=null&&r.Agents[0]&&z({AgentId:r.Agents[0].AgentId,FromTime:u==null?void 0:u[0],ToTime:u==null?void 0:u[1]})}}),b=D.loading,c=D.data,C=(0,d.QT)(Nt,{manual:!0,formatResult:function(r){return r==null?void 0:r.Metrics}}),Z=C.loading,M=C.data,v=C.run,h=(0,d.QT)(Ft,{manual:!0,formatResult:function(r){return r==null?void 0:r.Metrics}}),m=h.loading,f=h.data,V=h.run,Q=(0,d.QT)(bt,{manual:!0,formatResult:function(r){return r==null?void 0:r.Metrics}}),Kt=Q.loading,Wt=Q.data,Vt=Q.run,$=(0,d.QT)(Mt,{manual:!0,formatResult:function(r){return r==null?void 0:r.Metrics}}),Qt=$.loading,$t=$.data,Ut=$.run,U=(0,d.QT)(St,{manual:!0,formatResult:function(r){return r==null?void 0:r.Metrics}}),zt=U.loading,Xt=U.data,qt=U.run,_t=function(r){j.default.info("\u0412\u044B\u0431\u0440\u0430\u043D\u0430 \u0432\u043A\u043B\u0430\u0434\u043A\u0430 ".concat(r)),z({AgentId:parseInt(r),FromTime:u==null?void 0:u[0],ToTime:u==null?void 0:u[1]}),a(r)},z=function(r){v(r),V(r),Vt(r),Ut(r),qt(r)},tt=s||(c==null?void 0:c.Agents[0])&&(c==null?void 0:c.Agents[0].AgentId.toString())||"",ta=function(r,at){r&&(z({AgentId:parseInt(at),FromTime:r[0],ToTime:r[1]}),I(r))};return(0,n.jsx)(rt.ZP,{content:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:{textAlign:"center"},children:(0,n.jsx)(et.Z.RangePicker,{defaultValue:u,showTime:!0,format:kt,onChange:function(r){return ta(r,tt)}})})}),header:{title:"Agents Metrics Dashboard"},children:(0,n.jsx)(nt.Z,{children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(E.Suspense,{fallback:null,children:(0,n.jsx)(Yt,{activeKey:tt,loading:b,timeRange:u,agentsData:(c==null?void 0:c.Agents)||[],cpuData:M,cpuLoading:Z,ramData:f,ramLoading:m,hddData:Wt,hddLoading:Kt,networkData:$t,networkLoading:Qt,dotNetData:Xt,dotNetLoading:zt,handleTabChange:_t})})})})})},Jt=Gt}}]);
